apply plugin: 'java-library'
apply plugin: 'kotlin'
apply from: '../publish-jitpack.gradle'

def ignores = [
        "ILaunchActivityInterceptor",
        "ActivityResultContractCompat",
        "DefaultActivityResultContractCompat",
        "Activity",
        "Intent",
]

sourceSets{
    main {
        java.srcDirs += "src/ignore/java"
//        if (rootProject.name == "P2M-Example") {
//            ignores.forEach { name ->
//                java.exclude("**/${name}.*")
//            }
//        }
    }
}

tasks.named("jar").configure{ Jar jar ->
    ignores.forEach { name ->
        jar.exclude("**/${name}.*")
    }
}

dependencies {
    compileOnly "org.jetbrains.kotlin:kotlin-stdlib:$kotlin_version"
    compileOnly "org.jetbrains.kotlin:kotlin-reflect:$kotlin_version"
}

sourceCompatibility = "8"
targetCompatibility = "8"